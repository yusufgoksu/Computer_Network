import socket

def create_web_client(server_ip, server_port, path="/"):
    # Adım 1: TCP soketi oluşturma
    client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

    try:
        # Adım 2: Web sunucusuna bağlanma
        client_socket.connect((server_ip, server_port))
        print(f"Bağlantı kuruldu: {server_ip}:{server_port}")

        # Adım 3: HTTP isteği oluşturma (GET isteği)
        http_request = f"GET {path} HTTP/1.1\r\nHost: {server_ip}\r\nConnection: close\r\n\r\n"

        # Adım 4: HTTP isteğini sunucuya gönderme
        client_socket.send(http_request.encode())
        print(f"HTTP isteği gönderildi:\n{http_request}")

        # Adım 5: HTTP yanıtını alma ve ekrana yazdırma
        response = b""  # Yanıtı depolamak için byte türünde bir değişken
        while True:
            data = client_socket.recv(4096)  # 4 KB'lık bloklar halinde veri al
            if not data:
                break
            response += data

        print("----- Sunucudan Gelen Yanıt -----")
        print(response.decode(errors="ignore"))  # Yanıtı ekrana yazdır

    except Exception as e:
        print(f"Bağlantı hatası: {e}")

    finally:
        # Adım 6: Soketi kapatma
        client_socket.close()
        print("Bağlantı kapatıldı.")

# Sunucu IP adresi ve portu
server_ip = "127.0.0.1"  # Yerel sunucu (localhost)
server_port = 80  # HTTP portu

# Web istemcisini başlatma
create_web_client(server_ip, server_port, "/")  # Ana sayfa için "/" kullanıyoruz
